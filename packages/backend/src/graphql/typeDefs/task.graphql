# -----------------------------
# Queries
# -----------------------------
enum TaskStatus {
  all
  done
  undone
}

type Task {
  id: ID!
  title: String!
  description: String
  isDone: Boolean!
  priority: Int!
  dueDate: DateTime
  category: Category
}

input TaskFilterInput {
  status: TaskStatus = all
  priority: PriorityRangeInput
  dueDate: DateRangeInput
  categoryId: ID
  search: String
}

input PriorityRangeInput {
  min: Int
  max: Int
}

extend type Query {
  getTask(id: ID!): Task
  getTasks(filter: TaskFilterInput, orderBy: OrderByInput, skip: Int, take: Int): [Task!]!
}

# -----------------------------
# Mutations
# -----------------------------

input TaskCreateInput {
  title: String!
  description: String
  priority: Int
  dueDate: String
  categoryId: ID
}

input TaskUpdateInput {
  title: String
  description: String
  priority: Int
  dueDate: String
  categoryId: ID
  isDone: Boolean
}

input TaskMarkDoneInput {
  isDone: Boolean!
}

extend type Mutation {
  createTask(input: TaskCreateInput!): Task!
  updateTask(id: ID!, input: TaskUpdateInput!): Task!
  deleteTask(id: ID!): Task!
  markTaskDone(id: ID!, input: TaskMarkDoneInput!): Task!
}